<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Школьный медиаархив</title>
    
    <link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="dist/libs.min.css">
    <link rel="stylesheet" href="dist/src.min.css">
    
    <script>
        var gui = require('nw.gui');
        var win = gui.Window.get();
        var config = require('./config');
    </script>
</head>
<body>
    <div id="main" class="screen">
        <nav class="navbar navbar-inverse navbar-fixed-top">
            <div class="container-fluid">
                <div class="navbar-header col-sm-4 col-md-3">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">Скрыть навигацию</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#events">Медиаархив</a>
                </div>
                <div id="navbar" class="navbar-collapse collapse">
                    <ul class="nav navbar-nav">
                        <li><a href="#" id="update_index_button">Обновить список мероприятий</a></li>
                    </ul>
                    <div class="navbar-form navbar-left">
                        <div class="input-group" id="datepicker_form">
                            <span class="input-group-addon" id="date_start_helper">
                                <i class="fa fa-calendar"></i>
                            </span>
                            <input class="form-control" id="datepicker" name="text">
                            <div class="input-group-btn">
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-chevron-down"></i></button>
                                <ul class="dropdown-menu" role="menu">
                                    <li id="today"><a>За сегодня</a></li>
                                    <li id="week"><a>За неделю</a></li>
                                    <li id="month"><a>За месяц</a></li> 
                                </ul>
                            </div><!-- /btn-group -->
                        </div>
                    </div>
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="#settings"><i class="fa fa-cog"></i> Настройки</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    
        <div class="container-fluid" id="pages">
            <div data-page="settings" class="page" id="settings">
                <form class="form-horizontal" id="settings_form">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Тип данных</label>
                        <div class="col-sm-10">
                            <select name="data_type" id="data_type" class="form-control">
                                <option value="">Выбрать</option>
                                <option value="files">Файлы</option>
                                <option value="yadisk">Яндекс Диск API</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Корневая директория</label>
                        <div class="col-sm-10" id="root_dir">
                            <div id="files">
                                <input type="file" webkitdirectory id="file_root_dir_selector" />
                            </div>
                            <div id="yadisk">
                                <div class="btn btn-default" id="choose">Выбрать</div>
                            </div>
                            <div id="nothing">
                                <p class="help-block">выберите тип данных</p>
                            </div>
                            <p class="help-block">Сейчас: <span id="dir">(пусто)</span></p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">ВКонтакте</label>
                        <div class="col-sm-10" id="vk">
                            <button class="btn btn-primary" id="vk_auth_start" type="button"><i class="fa fa-vk"></i> Подключить ВКонтакте</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-10">
                            <button type="button" id="start_button" class="btn btn-primary">Продолжить</button>
                        </div>
                    </div>
                </form>
            </div>
            <div data-page="events" class="page">
                <input type="text" class="form-control input-lg" id="search" placeholder="Поиск по мероприятиям...">
                <table class="table table-condensed table-striped" id="events_table">
                    <thead>
                        <tr>
                            <th>Название</th>
                            <th>Дата</th>
                            <th>Материалы</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
    
    <div class="modal" id="modal" tabindex="-1" role="dialog" aria-labelledby="modal_header" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Закрыть</span></button>
                    <h1 class="modal-title" id="modal_header"></h1>
                </div>
                <div class="modal-body" id="modal_body"></div>
            </div>
        </div>
    </div>
    
    <script src="dist/libs.min.js"></script>
    <script src="dist/src.min.js"></script>
    
    <script id="eventTemplate" type="text/x-handlebars-template">
        <tr class="event_row" data-dir="{{dir}}">
            <td class="name">{{name}}</td>
            <td>
                <span class="date_tech" style="display: none;">{{date.year}}-{{date.month}}-{{date.day}}</span>
                <span class="data">{{date.day}}.{{date.month}}.{{date.year}}</span>
            </td>
            <td>
                <a class="open_folder"><i class="fa fa-folder"></i></a>
                <a class="show_modal"><i class="fa fa-external-link"></i></a>
            </td>
        </tr>
    </script>
    
    <script id="event_modal_template" type="text/x-handlebars-template">
        <div class="row">
            <div class="col-md-3">
                {{#if preview_photo}}
                    <img src="{{dir}}{{preview_photo}}" class="col-md-12" style="cursor: pointer" title="Нажмите, чтобы открыть фото">
                {{else}}
                    <small>нет главной фотографии</small>
                {{/if}}
            </div>
            <div class="col-md-9" id="text">загрузка...</div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <hr>
                <button class="open_dir btn btn-primary"><i class="fa fa-folder"></i> Открыть директорию</button>
                <button class="vk_post btn btn-default pull-right"><i class="fa fa-vk"></i> Выложить ВКонтакте</button>
            </div>
        </div>
    </script>
    <script src="http://localhost:35729/livereload.js"></script>
    
</body>
</html>